{%extends "layout.html" %}

{%block content%}

    <button class = "btn btn-primary"><a id="linkButton" href="#advertisement">Create an Advertisement</a></button>
    <button class = "btn btn-primary"><a id="linkButton" href="#update">Update User</a></button>
    
    <div class="content-section">
        <table class="table table-hover">
            <div>Number of Active Advertisements : {{activeNumber}}</div>
            <div>Number of Total Advertisement : {{total}}</div>
            <tr>
                <th>Advertisement ID</th>
                <th>Age</th>
                <th>Breed</th>
                <th>Health</th>
                <th>Date</th>
                <th>Availability</th>
            </tr>
        {%for ad in myAds%}
                <tr>
                    <td>{{ad.id}}</td>
                    <td>{{ad.age}}</td>
                    <td>{{ad.breed}}</td>
                    <td>{{ad.health}}</td>
                    <td>{{ad.ad_date}}</td>
                    {%if ad.availability%}<td>Active</td>
                    <td>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                        Edit
                        </button>
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLabel">Change Advertisement Status</h5>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                    <form method="POST" action="">
                                        {{form.hidden_tag()}}
                                        <fieldset class="form-group">
                                            <div class="form-group">
                                                {{hform.ad_id.label(class = "form-control-label")}}
                                                {% if hform.ad_id.errors %}
                                                    {{ hform.ad_id(class="form-control form-control-lg is-invalid") }}
                                                    <div class="invalid-feedback">
                                                        {% for error in hform.ad_id.errors %}
                                                            <span>{{ error }}</span>
                                                        {% endfor %}
                                                    </div>
                                                {% else %}
                                                    {{ hform.ad_id(class="form-control form-control-lg") }}
                                                {% endif %}
                                            </div>
                                            <div class="form-group">
                                                {{hform.username.label(class = "form-control-label")}}
                                                {% if hform.username.errors %}
                                                    {{ hform.username(class="form-control form-control-lg is-invalid") }}
                                                    <div class="invalid-feedback">
                                                        {% for error in hform.username.errors %}
                                                            <span>{{ error }}</span>
                                                        {% endfor %}
                                                    </div>
                                                {% else %}
                                                    {{ hform.username(class="form-control form-control-lg") }}
                                                {% endif %}
                                            </div                                       
                                        </fieldset>
                                        <div class="form-group">
                                            {{form.submit(class = "btn btn-outline-info")}}
                                        </div>
                                    </form>
                                </div>
                              </div>
                            </div>
                          </div>
                    </td>
                    {%else%}<td>Expired/Homed</td>{%endif%}
                </tr>
        {%endfor%}
        </table>
    </div>
    <div class="content-section">
        <div class="hiddenDiv" id="advertisement">
            <form method="POST" action="">
                {{form.hidden_tag()}}
                <fieldset class="form-group">
                    <legend class="border-bottom mb-4">Create an Advertisement</legend>
                    <div class="form-group">
                        {{form.age.label(class = "form-control-label")}}
                        {% if form.age.errors %}
                            {{ form.age(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form.age.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.age(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{form.breed.label(class = "form-control-label")}}
                        {% if form.breed.errors %}
                            {{ form.breed(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form.breed.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.breed(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{form.health_status.label(class = "form-control-label")}}
                        {% if form.health_status.errors %}
                            {{ form.health_status(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form.health_status.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.health_status(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>
                </fieldset>
                <div class="form-group">
                    {{form.submit(class = "btn btn-outline-info")}}
                </div>
            </form>
        </div>   
    </div>
    <div class="content-section" id="update">
        <form method="POST" action="">
            {{upForm.hidden_tag()}}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Update Your User Informations</legend>
                <div class="form-group">
                    {{upForm.city.label(class = "form-control-label")}}
                    {% if upForm.city.errors %}
                        {{ upForm.city(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.city.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.city(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{upForm.district.label(class = "form-control-label")}}
                    {% if upForm.district.errors %}
                        {{ upForm.district(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.district.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.district(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{upForm.phoneNumber.label(class = "form-control-label")}}
                    {% if upForm.phoneNumber.errors %}
                        {{ upForm.phoneNumber(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.phoneNumber.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.phoneNumber(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{upForm.userType.label(class = "form-control-label")}}
                    {% if upForm.userType.errors %}
                        {{ upForm.userType(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.userType.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.userType(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{upForm.password.label(class = "form-control-label")}}
                    {% if upForm.password.errors %}
                        {{ upForm.password(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.password.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.password(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{upForm.confirmPassword.label(class = "form-control-label")}}
                    {% if upForm.confirmPassword.errors %}
                        {{ upForm.confirmPassword(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in upForm.confirmPassword.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ upForm.confirmPassword(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
            </fieldset>
            <div class="form-group">
                {{upForm.submit(class = "btn btn-outline-info")}}
            </div>
        </form>
    </div>
    <div>
        <a href="{{url_for('delete_user')}}">Delete My Account</a>
    </div>  
{%endblock%}